extends ../responsive

include inc/navbar

append meta
	meta(name="event_id", content="#{event._id}")

append addonjs
	script(src="/js/eventLandingPage.js", defer="true")
	include inc/mapjs

block content
	mixin navbar(4)
	
	mixin createCategory
		.description-text(style="margin-top:50px;")
			b My Category is:
			input#createOwnCategory(type="text", placeholder="Create my own category..", style="font-size:18px; margin-top:10px; margin-left:0px; border:1px solid #ecd077;")
	
	.row
		.col-md-12.col-lg-12.col-sm-12
			h3.text-center= event.name
	
	.row
		.col-sm-7.col-lg-7.col-md-7
			.row
				.col-sm-4.col-lg-4.col-md-4
					img(src=event.avatar.url, style="max-height: 150px; max-width: 150px;")
				.col-sm-8.col-lg-8.col-md-8
					.description-text-medium(style="word-wrap: break-word;")!= event.description
			.row
				.col-md-12.col-lg-12.col-sm-12
					// tickets required
					if event.pricedTickets
						include inc/payment
			.row
				.col-md-12.col-lg-12.col-sm-12
					.text-center
						h4 Who are you in this event:
					if event.allowAttendeesToCreateCategories && event.categories.length > 0
						.row
							.col-lg-5.col-sm-5.col-md-5
								.iconsbox2.left#eventCategoryList
									for category in event.categories
										input.btn.btn-default.btn-block(type="button", value=category)
							if event.allowAttendeesToCreateCategories
								.col-sm-6.col-lg-6.col-md-6
									.row
										.col-sm-4.col-lg-4.col-md-4
											.inten1
												.inten2
													| or
										.col-sm-8.col-lg-8.col-md-8
											mixin createCategory()
					else if event.allowAttendeesToCreateCategories
						mixin createCategory()
					else
						h5 An attendee. Sorry, the event organiser does not allow attendees to choose categories or craete their own.
		.col-sm-5.col-lg-5.col-md-5
			.row
				.col-sm-6.col-lg-6.col-md-6
					.row
						.col-sm-6.col-lg-6.col-md-6
							h4 At #{event.start.getHours()}:#{event.start.getMinutes()}
						.col-sm-6.col-lg-6.col-md-6
							h4 On 
								= event.start.getDate()
								| .
								= event.start.getMonth()+1
								br
								= event.start.getFullYear()
				.col-sm-6.col-lg-6.col-md-6
					h4 Event Organizer
					h5
						strong= event.user.getName()
						if event.user.position
							|  - #{event.user.position}
			.row
				.col-sm-12.col-lg-12.col-md-12
					h4= event.venue_name
					if event.address && event.address.length > 0
						h4= event.address
					else
						h4 Location unavailable
			.row
				.col-sm-12.col-lg-12.col-md-12
					#eventMap(style="height:300px;")
						h4 Event does not have a location
	
	.row
		.col-sm-12.col-lg-12.col-md-12
			//- bottom buttons access & home page
			unless eventattending
				.text-center
					p#accessEventWarningMessage.hide(style="font-size: 16px;") Please select a category, otherwise 
						code click "Access Event" once more
						|  if you don't like it when computers make you do things :)
					input#accessEvent.btn.btn-success(type="submit", value="Access event")
					input.btn.btn-info(type="button", onclick="window.location='/';return false;", value="Go back to homepage")