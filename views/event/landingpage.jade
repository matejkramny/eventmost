extends ../responsive

include inc/navbar

append addonjs
	script(src="/js/eventLandingPage.js?v=#{versionHash}" defer)
	script(src="/js/drops.js?v=#{versionHash}" defer)
	include inc/mapjs
	script(src="/js/vendor/moment.min.js" defer)
	script(src="/js/event_landingpage.js?v=#{versionHash}" defer)
	script(src="https://js.stripe.com/v2/" async)

block content
	if (eventattending)
		+navbar
	
	.nspacer
	//- if there is no avatar event description should go here
	.col-md-3.col-lg-3.col-sm-3
		if (ev.avatar)
			img.img-responsive(src=ev.avatar.url style="width:100%;")
	.col-md-9.col-lg-9.col-sm-9
		.col-md-9.col-lg-9.col-sm-9
				.pull-left.linknamewidth.pad-left-zero.left.inline.nspacer-small.font-exception.font18.bold.color-green(type='submit', style="")
					| #{ev.name}
		.clearfix
		.nspacer
		.col-md-3.col-lg-3.col-sm-3.font16
			.inline
				img(src="/images/small-clock.svg" alt=""  )
			.font16.inline.color-green.semi-bold
				| WHEN
			.font-s(title= eventStartFormatted style="word-wrap: break-word; word-break: break-word;")
				.semi-bold
					= eventStartFormatted
				.poo(style="font-weight:200;")
				= eventEndFormatted
		.col-md-3.col-lg-3.col-sm-3.font16
			.inline
				img(src="/images/mapster2.svg" alt=""  )
			.font16.inline.color-green.semi-bold
				| WHERE
			.font-s(style="word-break:break-all; ")
				- if (ev.address || ev.venue_name)
					strong.pull-left.break(style="word-wrap:break-word; word-break: break-word; white-space: -moz-pre-wrap; white-space: pre-wrap;")
					span(style="word-wrap:break-word; word-break: break-word;")		
						= ev.venue_name
					.pull-left(style="word-wrap:break-word; word-break: break-word;")
						= ev.address
					- if (!ev.address && !ev.venue_name)
						| Event does not have a location
			.nspacer
			#eventMap(style="height:110px; width:180px;")
		.col-md-4.col-lg-4.col-sm-4.font16
			.inline
				img(src="/images/organizer.svg" alt=""  )
			.font16.inline.color-green.semi-bold
				| EVENT ORGANIZER
			.font16.inline(style="word-break:break-all; ")
				for attendee in locals.ev.attendees
					if (attendee.admin && attendee.isAttending)
						a.link-purple.font16(href="/user/"+attendee.user._id)= attendee.user.getName()
						br
		.col-md-2.col-lg-2.col-sm-2.font16
			.inline
				img(src="/images/sponsors-cion.svg" alt=""  )
			.font16.inline.color-green.semi-bold
				| SPONSORS
			.nspacer

			
			if (ev.sponsorLayout.sponsor1)
				if (ev.sponsorLayout.sponsor1)
					img.img-responsive(src=ev.sponsorLayout.sponsor1.url style="width:100%;")
				.nspacer-small
				if (ev.sponsorLayout.sponsor2 && ev.sponsorLayout.layout > 0 && ev.sponsorLayout.layout != 3)
					img.img-responsive(src=ev.sponsorLayout.sponsor2.url style="width:100%;")
				.nspacer-small
				if (ev.sponsorLayout.sponsor3 && ev.sponsorLayout.layout == 2)
					img.img-responsive(src=ev.sponsorLayout.sponsor3.url style="width:100%;")
		.clearfix
	.clearfix

	.nspacer-big


	.col-md-12.col-lg-12.col-sm-12
		.font16.semi-bold.color-green
			| EVENT DESCRIPTION
		.line-purple
		.description-text-medium.break!= ev.description	

	if (!eventattending)
		if (ev.pricedTickets && !(attendee && attendee.hasPaid == true))
			script.
				window.location.hash = "";
			.col-md-12.col-lg-12.col-sm-12
				// tickets required
				include inc/payment
		else
			.col-md-12.col-lg-12.col-sm-12
				.nspacer.center
					if (loggedIn)
						if (ev.categories.length > 0 || ev.allowAttendeesToCreateCategories)
							button.btn.btn-primary.hide-prof-butt(type='button' data-toggle="modal" href="#attendModal" style="border-radius: 10px; padding:10px; padding-right:25px; padding-left:25px;")
								| Attend event
						else
							p.accessEventWarningMessage.hide(style="font-size: 16px;")
							button.btn.btn-primary.hide-prof-butt#accessEventDirect(href="#")
								| Attend event
					else
						button.btn.btn-primary.hide-prof-butt(data-toggle="modal" href="#signModal" style="border-radius: 10px; padding:10px; padding-right:25px; padding-left:25px;")
							| Attend event
	
	if (!eventattending && loggedIn)
		include ../modals/registration