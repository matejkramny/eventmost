extends ../responsive

include inc/navbar

append meta
	meta(name="event_id", content="#{ev._id}")

append addonjs
	script(src="/js/eventLandingPage.js", defer="true")
	script(src="/js/drops.js", defer="true")
	include inc/mapjs


block content
	mixin navbar(4)
	
	mixin createCategory
		.description-text(style="margin-top:50px;")
			b My Category is:
			input#createOwnCategory(type="text", placeholder="Create my own category..", style="font-size:18px; margin-top:10px; margin-left:0px; border:1px solid #ecd077;")
	
	.col-xs-12.hide-all2
		form(method="POST", accept-charset="utf-8")
			input.gonew2.pull-right.header-links(type="button", value="GO", style="width:10%;")
			input(type="hidden", name="_csrf", value=token)
			input.pull-right.font-s.search-input.pad-left-ten.header-links(type="search", placeholder="search events or people", style="width:87%;")
	.clearfix.hide-all2
	
	.nspacer
	.col-md-4.col-lg-4.col-sm-4
		.center
			img(src="/images/event-avatar-new.svg" alt="" )
			// it's commeneted because there is different avatar image img(src=ev.avatar.url,)
	.col-md-8.col-lg-8.col-sm-8
		h3= ev.name
		.nspacer
		.col-md-4.col-lg-4.col-sm-4.pad-left-zero.font-e.semi-bold
			| When
			.line-purple
			.font-s.inline.semi-bold
				| At #{ev.start.getHours()}:#{ev.start.getMinutes()}
			.font-s.inline.semi-bold
				| On 
				= ev.start.getDate()
				| .
				= ev.start.getMonth()+1
			.font-s.inline.semi-bold
				= ev.start.getFullYear()
		.col-md-4.col-lg-4.col-sm-4.pad-left-zero.font-e.semi-bold
			| Where
			.line-purple
			.font-s.inline.semi-bold
				img(src="/images/mapster.svg" alt="" class="pad-right-five")
				= ev.address
		.col-md-4.col-lg-4.col-sm-4.pad-left-zero.font-e.semi-bold
			| Event Organizer
			.line-purple
			.font-s.inline.semi-bold
			// event organiser name here?
		.clearfix
		.nspacer
		// google map here?
		img(src="/images/map.jpg" alt="" class="img-responsive")
	.clearfix


	.col-md-12.col-lg-12.col-sm-12
		.font.semi-bold
			| Event description
		.line-purple
		.description-text-medium.break!= ev.description	

	.col-md-12.col-lg-12.col-sm-12
		// tickets required
		if ev.pricedTickets
			include inc/payment
			.row
				.col-md-12.col-lg-12.col-sm-12
					.text-center
						h4 Who are you in this event:
					if ev.allowAttendeesToCreateCategories && ev.categories.length > 0
						.row
							.col-lg-5.col-sm-5.col-md-5
								.iconsbox2.left#eventCategoryList
									for category in ev.categories
										input.btn.btn-default.btn-block(type="button", value=category)
							if ev.allowAttendeesToCreateCategories
								.col-sm-6.col-lg-6.col-md-6
									.row
										.col-sm-4.col-lg-4.col-md-4
											.inten1
												.inten2
													| or
										.col-sm-8.col-lg-8.col-md-8
											mixin createCategory()
					else if ev.allowAttendeesToCreateCategories
						mixin createCategory()
					else
						h5 An attendee. Sorry, the event organiser does not allow attendees to choose categories or craete their own.
		.col-sm-5.col-lg-5.col-md-5
			.row
				.col-sm-6.col-lg-6.col-md-6
					.row
						.col-sm-6.col-lg-6.col-md-6
						.col-sm-6.col-lg-6.col-md-6
				.col-sm-6.col-lg-6.col-md-6
			.row
				.col-sm-12.col-lg-12.col-md-12
					h4= ev.venue_name
					if ev.address && ev.address.length > 0
						h4= ev.address
					else
						h4 Location unavailable
			.row
				.col-sm-12.col-lg-12.col-md-12
					#eventMap(style="height:300px;")
						h4 Event does not have a location
	
	.row
		.col-sm-12.col-lg-12.col-md-12
			//- bottom buttons access & home page
			unless eventattending
				.text-center
					p#accessEventWarningMessage.hide(style="font-size: 16px;") Please select a category, otherwise 
						code click "Access Event" once more
						|  if you don't like it when computers make you do things :)
					input#accessEvent.btn.btn-success(type="submit", value="Access event")
					input.btn.btn-info(type="button", onclick="window.location='/';return false;", value="Go back to homepage")