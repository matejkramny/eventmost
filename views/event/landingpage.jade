extends ../base

include inc/navbar

append meta
	meta(name="event_id", content="#{event._id}")

append addonjs
	script(src="/js/eventLandingPage.js")
	include inc/mapjs

block content
	mixin navbar(4)
	
	.headerspacer2
	.eighty-five
		.thirty1.left
			img(src=event.avatar.url)
		.seventy.right
			.speaker_titlerespond2
				.color
				h5 
					b= event.name
			.headerspacer2
			.left
				.description-text When
				.line
				.left
					img.arrow(src="/img/clock.svg", style="width:50px; height:50x;")
				.left.date2.color #{event.start.getHours()}:#{event.start.getMinutes()}
					br
					| (BST)
				.right_star2.smallslid5
					.image2
						img.image2(src="/img/calendar-icony.svg", style="width:47px; height:50x;")
						h18= event.start.getDate()
							| .
							= event.start.getMonth()+1
							br
							= event.start.getFullYear()
			.left.smallslid3
				.description-text
					| Where
				.line
				.left
					img(src="/img/map6.svg", alt="", class="arrow" style="margin-top:-5px; margin-left:-10px;")
				.left.location
					if event.address && event.address.length > 0
						h3= event.address
					else
						h2 Location unavailable
			.left.smallslid3
				.description-text
					| Event Organizer
				.line
				.left.description-text-small
					b= event.user.getName()
					if event.user.position
						|  - #{event.user.position}
			.clearfix
			.headerspacer2
			.left
				.description-text-big
					| Event description
				.line
				.left.description-text-medium!= event.description
		.clearfix

	// tickets required
	if event.pricedTickets
		include inc/payment

	.clearfix
	br

	mixin createCategory
		.description-text(style="margin-top:50px;")
			b Create your own category:
			input#createOwnCategory.file_input_textbox55(type="text", style="font-size:18px; margin-top:0px; margin-left:5px;")
			.line(style="margin-left:20px;")
	
	.row-fluid
		.span6
			.center2.description-text
				b Who are you in this event:
			if event.allowAttendeesToCreateCategories && event.categories.length > 0
				.row-fluid
					.span5.offset1
						.iconsbox2.left#eventCategoryList
							for category in event.categories
								input.prof-choice(type="button", value=category)
					if event.allowAttendeesToCreateCategories
						.span6
							.row-fluid
								.span4
									.inten1
										.inten2
											| or
								.span8
									mixin createCategory()
			else if event.allowAttendeesToCreateCategories
				mixin createCategory()
			else
				| An attendee. Sorry, the event organiser does not allow attendees to choose categories or craete their own.
		.span6
			#eventMap(style="height:300px;")
				h4(style="color:#ecd077;") Event does not have a location
	
	br
	.clearfix
	
	//- bottom buttons access & home page
	unless eventattending
		.eighty-five
			.center2
				p#accessEventWarningMessage.hide(style="color:#FFF; font-size: 16px;") Please select a category, otherwise 
					font(style="color: #ecd077") click "Access Event" once more
					|  if you don't like it when computers make you do things :)
				input#accessEvent.profile-button-small(type="submit", value="Access event")
				input.profile-button-small.smallslid3(type="button", onclick="window.location='/';return false;", value="Go back to homepage")